<!--deo_dashboard.html-->
<!DOCTYPE html>
<html lang="en">
{% include 'header.html' %}
<head>

</head>
<body>
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mt-4">
        <h4>DEO Dashboard</h4>
  
    </div>

    <div class="table-container mt-4">
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>PsNo</th>
                    <th>Ps Name</th>
                    <th>9AM</th>
                    <th>9AM%</th>
                    <th>11AM</th>
                    <th>11AM%</th>
                    <th>1PM</th>
                    <th>1PM%</th>
                    <th>3PM</th>
                    <th>3PM%</th>
                    <th>5PM</th>
                    <th>5PM%</th>
                    <th>Closing</th>
                    <th>Closing%</th>
                </tr>
            </thead>
            <tbody>
                {% for ps in polling_stations %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ ps['ps_no'] }}</td>
                    <td>{{ ps['NAME'] }}</td>
                    {% for slot in ['TIME_9AM', 'TIME_11AM', 'TIME_01PM', 'TIME_03PM', 'TIME_05PM', 'CLOSE'] %}
                        <td>{{ ps[slot] }}</td>
                        <td>
                            {% if ps['total_voter'] %}
                                {{ ((ps[slot] / ps['total_voter']) * 100) | round(2) }}%
                            {% else %}
                                0%
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
            <!-- Grand Totals row -->
            <tfoot>
                <tr>
                    <td colspan="3"><strong>Grand Total</strong></td>
                    {% for slot in ['TIME_9AM', 'TIME_11AM', 'TIME_01PM', 'TIME_03PM', 'TIME_05PM', 'CLOSE'] %}
                        <td>{{ grand_totals[slot] }}</td>
                        <td>{{ grand_totals_percentages[slot] | round(2) }}%</td>
                    {% endfor %}
                </tr>
                <!-- Progress row showing percentage of updated fields -->
                <tr>
                    <td colspan="3"><strong>Progress of updation by PRO in %</strong></td>
                    {% for slot in ['TIME_9AM', 'TIME_11AM', 'TIME_01PM', 'TIME_03PM', 'TIME_05PM', 'CLOSE'] %}
                        <td colspan="2">{{ progress_percentages[slot] | round(2) }}%</td>
                    {% endfor %}
                </tr>
            </tfoot>
        </table>
    </div>
</div>


</body>
</html>
